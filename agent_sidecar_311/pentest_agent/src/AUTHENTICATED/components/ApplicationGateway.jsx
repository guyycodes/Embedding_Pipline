// AppGateway.jsx (or inline in your code snippet)

import React from 'react';
import { Box, Typography } from '@mui/material';
import VncViewer from './VNCviewer'; // <-- import our new component

const AppGateway = ({ appUrl }) => {
  // Construct the WebSocket URL for noVNC
  // If your sidecar is on the same host, and noVNC is on port 6080:
  const webSocketUrl = `ws://${window.location.hostname}:6080`;
  // http://localhost:6080/vnc.html
  return (
    <Box
      sx={{
        width: '100%',
        height: '100%',
        bgcolor: 'black',
        display: 'flex',
        flexDirection: 'column',
      }}
    >
      {/* Info bar (optional) */}
      <Box
        sx={{
          p: 2,
          textAlign: 'center',
          backgroundColor: 'grey.900',
          color: 'white',
        }}
      >
        <Typography variant="h6" sx={{ mb: 1 }}>
          Connecting to {appUrl}
        </Typography>
        <Typography variant="body2" color="gray">
          WebSocket: {webSocketUrl}
        </Typography>
      </Box>

      {/* The actual noVNC viewer area */}
      <Box sx={{ flex: 1, overflow: 'hidden' }}>
        <VncViewer webSocketUrl={webSocketUrl} />
      </Box>
    </Box>
  );
};

export default AppGateway;
