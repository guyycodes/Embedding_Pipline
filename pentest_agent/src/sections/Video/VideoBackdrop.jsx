import React, { useRef, useEffect } from "react";
import { Button, Typography, Box, useTheme } from "@mui/material";
import { useGlobalContext } from "../../context/UseContext";

const TEXTCOLOR = '#00FF41'
const BACKGROUNDCOLOR= '#000000';
const SECONDARYCOLOR = '#3B82F6';


const HERO_TEXT = {
    first: "Automated",
    highlight: "Security",
    last: "Penetration Testing"
  };

  const heroMessage = {
    msg: "Cutting-edge penetration testing powered by AI, finding the weaknesses others miss and securing your digital infrastructure.",
    learnMore: "Learn More",
    signIn: "Sign In"
};


const video ={
    src: "https://imgur.com/xPeA5lj.mp4"
}
  

export const TitleTextsButton = () => {
  const theme = useTheme();
  const videoRef = useRef(null);
  const { dispatch } = useGlobalContext()

  const openLogin = () =>{
      dispatch({ type: 'TOGGLE_AUTH_MODAL', payload: true });
  }

  const scrollNow = (location) => {
    window.scrollTo({
      top: location,
      behavior: 'smooth',
    });
  };

  useEffect(() => {
    if (videoRef.current) {
      videoRef.current.playbackRate = 0.60;
    }
  }, []);


  return (
    <Box sx={{
      position: 'relative',
      overflow: 'hidden',
      width: '100%',
      maxWidth: '1200px',
      margin: '0 auto',
      padding: { xs: "1rem", md: "2rem" },
      minHeight: '400px',
      borderRadius: '25px',
      bgcolor: 'background.paper'
    }}>
        {/* Video Overlay */ }
        <Box sx={{
            position: 'absolute',
            top: 0,
            left: 0,
            width: '100%',
            height: '100%',
            backgroundColor: 'rgba(0, 0, 0, 0.7)', // Changed to dark overlay
            zIndex: 1,
            mixBlendMode: 'darken',
        }} />
      {/* Background Video */}
      <Box sx={{
        position: 'absolute',
        top: 0,
        left: 0,
        width: '100%',
        height: '100%',
        zIndex: 0,
        opacity: 0.5,
      }}>
        <video
          loop
          muted
          autoPlay
          playsInline
          ref={videoRef}
          style={{
            width: '100%',
            height: '100%',
            objectFit: 'cover',
            position: 'absolute',
            top: 0,
            left: 0,
          }}
        >
          <source src= {video.src} type="video/mp4" />
        </video>
        <Box sx={{
          position: 'absolute',
          top: 0,
          left: 0,
          width: '100%',
          height: '100%',
          backgroundColor: 'rgba(255, 255, 255, 0.5)',
          zIndex: 1,
        }} />
      </Box>

      {/* Main Content */}
      <Box sx={{
        display: "flex",
        flexDirection: { xs: "column", md: "row" },
        alignItems: { xs: "center", md: "flex-end" },
        gap: { xs: "2rem", md: "124px" },
        position: 'relative',
        zIndex: 2,
      }}>
        <Typography 
          variant="h1" 
          component="p" 
          sx={{
            fontFamily: "'Roboto', sans-serif",
            fontSize: {
              xs: "2rem",
              sm: "2.5rem",
              md: "3rem"
            },
            fontWeight: 700,
            letterSpacing: "0.02em",
            lineHeight: 1.2,
            marginTop: "-1px",
            position: "relative",
            width: "fit-content",
            textAlign: { xs: "center", md: "left" },
          }}
        >
          <Box component="span" sx={{ color: BACKGROUNDCOLOR }}>
            {HERO_TEXT.first}{" "}
          </Box>
          <Box component="span" sx={{ color: TEXTCOLOR }}>
            {HERO_TEXT.highlight}{" "}
          </Box>
          <Box component="span" sx={{ color: BACKGROUNDCOLOR }}>
            ,<br />
            {HERO_TEXT.last}
          </Box>
        </Typography>

        <Box sx={{
          display: "flex",
          flexDirection: "column",
          alignItems: { xs: "center", md: "flex-start" },
          gap: "24px",
          maxWidth: { xs: "100%", md: "658px" },
        }}>
          <Typography 
            variant="body1" 
            sx={{
              color: TEXTCOLOR,
              fontFamily: "'Roboto', sans-serif",
              fontSize: "1rem",
              fontWeight: 400,
              letterSpacing: "0.01em",
              lineHeight: 1.5,
              marginTop: "-1px",
              opacity: 0.75,
              position: "relative",
              width: "100%",
              textAlign: { xs: "center", md: "left" },
            }}
          >
            {heroMessage.msg}
          </Typography>

          <Box sx={{
            display: "flex",
            flexDirection: { xs: "column", sm: "row" },
            alignItems: "center",
            gap: "24px",
            width: { xs: "100%", sm: "auto" },
          }}>
            <Button 
              variant="contained" 
              sx={{ 
                bgcolor: SECONDARYCOLOR,
                width: { xs: "100%", sm: "auto" },
                '&:hover': {
                  bgcolor: '#b08f1a',
                },
              }}
              onClick={() => scrollNow(600)}
            >
              {heroMessage.learnMore}
            </Button>
            <Button 
              variant="outlined" 
              onClick={openLogin}
              sx={{ 
                borderColor: '#fff',
                color: '#fff',
                width: { xs: "100%", sm: "auto" },
                bgcolor: BACKGROUNDCOLOR,
                '&:hover': {
                  bgcolor: BACKGROUNDCOLOR,
                  borderColor: TEXTCOLOR,
                },
              }}
            >
              {heroMessage.signIn}
            </Button>
          </Box>
        </Box>
      </Box>
    </Box>
  );
};